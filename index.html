<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Pixel Editor Grau-Blau Neon</title>
<style>
  body {
    font-family:sans-serif;
    background:#1e2a38; /* dunkelblauer Hintergrund */
    color:#eee;
    margin:0;
    padding:10px;
  }
  #grid {
    display:grid;
    margin:10px auto;
    touch-action:none;
    background:#ccc; /* Rasterfläche hellgrau */
  }
  .cell {
    width:20px;
    height:20px;
    border:1px solid #00f0ff; /* Neon-Blau Linien */
    background:#ccc;          /* Zellen hellgrau */
  }
  .controls {
    display:flex;
    flex-wrap:wrap;
    gap:8px;
    margin:10px 0;
  }
  button, select, input[type=color], input[type=file] {
    padding:8px;
    border-radius:6px;
    border:1px solid #3a4a5a;
    background:#2c3e50; /* blau-grau Buttons */
    color:#eee;
  }
  button:hover, select:hover {
    background:#3d566e;
  }
  .gallery {
    display:grid;
    grid-template-columns:repeat(auto-fill,minmax(100px,1fr));
    gap:8px;
    margin-top:10px;
  }
  .gallery img {
    width:100%;
    background:#000;
  }
</style>
</head>
<body>
<h2>Pixel Editor Grau-Blau Neon</h2>

<div class="controls">
  <select id="size">
    <option value="16">16×16</option>
    <option value="32">32×32</option>
  </select>
  <input type="color" id="color" value="#0074D9">
  <button id="download">Upload/Download</button>
  <input type="file" id="upload" accept="image/*">
</div>

<div id="grid"></div>

<h3>Galerie</h3>
<div id="gallery" class="gallery"></div>

<script>
const gridEl=document.getElementById('grid');
const sizeSel=document.getElementById('size');
const colorSel=document.getElementById('color');
const downloadBtn=document.getElementById('download');
const uploadInput=document.getElementById('upload');
const gallery=document.getElementById('gallery');
let gridSize=16;

// Raster erzeugen
function makeGrid(n){
  gridSize=n;
  gridEl.style.gridTemplateColumns=`repeat(${n},20px)`;
  gridEl.innerHTML='';
  for(let i=0;i<n*n;i++){
    const cell=document.createElement('div');
    cell.className='cell';
    cell.addEventListener('click',()=>{
      if(cell.style.backgroundColor && cell.style.backgroundColor!=='' && cell.style.backgroundColor!=='transparent' && cell.style.backgroundColor!=='rgb(204, 204, 204)'){
        // zurück auf hellgrau
        cell.style.backgroundColor='#ccc';
      } else {
        cell.style.backgroundColor=colorSel.value;
      }
    });
    gridEl.appendChild(cell);
  }
}
sizeSel.onchange=()=>makeGrid(parseInt(sizeSel.value));
makeGrid(gridSize);

// Upload/Download Button: speichert PNG und fügt in Galerie ein
downloadBtn.onclick=()=>{
  const canvas=document.createElement('canvas');
  canvas.width=gridSize; canvas.height=gridSize;
  const ctx=canvas.getContext('2d');
  [...gridEl.children].forEach((cell,i)=>{
    const x=i%gridSize, y=Math.floor(i/gridSize);
    ctx.fillStyle=cell.style.backgroundColor||'#ccc';
    ctx.fillRect(x,y,1,1);
  });
  const url=canvas.toDataURL();
  const a=document.createElement('a');
  a.download='pixel.png'; a.href=url; a.click();
  // auch in Galerie speichern
  const img=document.createElement('img'); img.src=url;
  gallery.prepend(img);
};

// Upload in Galerie
uploadInput.onchange=()=>{
  const file=uploadInput.files[0];
  if(!file) return;
  const reader=new FileReader();
  reader.onload=()=>{
    const img=document.createElement('img');
    img.src=reader.result;
    gallery.prepend(img);
  };
  reader.readAsDataURL(file);
};
</script>
</body>
</html>
